#!/usr/bin/env node
// http://www.akadia.com/services/ssh_test_certificate.html
var path = require('path')
, app = require('../gulpfile')
, fs = require('fs')
, http = require('http')
, https = require('https');

app.init();

var credentials = {
    key: fs.readFileSync(path.join(__dirname, 'server.key'), 'utf8'),
    cert: fs.readFileSync(path.join(__dirname, 'server.crt'), 'utf8'),
    requestCert: false,
    rejectUnauthorized: false
};

app.set('port', process.env.PORT || 3000);

var httpServer = http.createServer(app);
var httpsServer = https.createServer(credentials, app);

httpServer.listen(app.get('port'));
httpsServer.listen(443);